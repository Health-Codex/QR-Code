<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POCUS Resources and Case Studies for Clinicians</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Visually Hidden Utility: Hides content accessibly */
        .visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }
        /* Enhanced Focus Visible styles for better accessibility */
        *:focus-visible { outline: 3px solid #2563eb; /* Blue-600 */ outline-offset: 2px; box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.4); }
        /* Modal Transitions */
        #modal { transition: opacity 0.3s ease-in-out; }
        #modal-content-box { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        #modal.opacity-0 { pointer-events: none; }
        #modal.opacity-0 #modal-content-box { transform: scale(0.95); opacity: 0; }
        /* Hide diagnosis section initially */
        .diagnosis-section.hidden { display: none; }
        /* Style for modal images */
        #modal-image-container img {
            border: 1px solid #e5e7eb; /* Gray-200 */
            object-fit: contain; /* Ensure entire image is visible */
            max-height: 300px; /* Constrain image height */
            width: auto; /* Allow width to adjust */
            max-width: 100%; /* Prevent exceeding container width */
            margin-left: auto;
            margin-right: auto;
            background-color: #f9fafb; /* Light gray background for images */
            border-radius: 0.375rem; /* Rounded corners */
        }

        /* --- Styles for interactive anatomy overlays --- */
        .anatomy-overlay {
            position: absolute;
            border: 2px solid transparent;
            border-radius: 50%; /* Default circle, override below if needed */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            background-color: rgba(59, 130, 246, 0.1);
        }
        .anatomy-overlay:hover,
        .anatomy-overlay:focus-visible {
            background-color: rgba(59, 130, 246, 0.25);
            border-color: rgba(37, 99, 235, 0.8);
        }
        #anatomy-region-cardiac { top: 30%; left: 40%; width: 20%; height: 18%; }
        #anatomy-region-lungs { top: 25%; left: 20%; width: 60%; height: 25%; border-radius: 15px;}
        #anatomy-region-ruq { top: 50%; left: 53%; width: 22%; height: 15%; border-radius: 10px; }
        #anatomy-region-luq { top: 50%; left: 25%; width: 22%; height: 15%; border-radius: 10px; }
        #anatomy-region-pelvis { top: 68%; left: 35%; width: 30%; height: 15%; border-radius: 10px; }
        #anatomy-region-vascular-neck { top: 12%; left: 42%; width: 16%; height: 10%; border-radius: 8px; }
        #anatomy-region-vascular-leg { top: 85%; left: 28%; width: 15%; height: 12%; border-radius: 8px; }

        /* --- Styles for "Under Construction" Overlay --- */
        .under-construction-container {
            position: relative; /* Needed for absolute positioning of the overlay */
            overflow: hidden; /* Optional: ensures overlay corners match container */
            border-radius: 0.75rem; /* Match the article's rounded corners */
        }
        .under-construction-overlay {
            position: absolute;
            inset: 0; /* Cover the entire container */
            background: repeating-linear-gradient(
                45deg,
                rgba(254, 240, 138, 0.7), /* Semi-transparent yellow */
                rgba(254, 240, 138, 0.7) 15px,
                rgba(0, 0, 0, 0.7) 15px,    /* Semi-transparent black */
                rgba(0, 0, 0, 0.7) 30px
            );
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10; /* Ensure overlay is on top */
            backdrop-filter: blur(2px); /* Optional: blur the background */
            -webkit-backdrop-filter: blur(2px); /* Safari support */
        }
        .under-construction-text {
            background-color: rgba(255, 255, 255, 0.85); /* Slightly transparent white background */
            color: #b91c1c; /* Dark red text */
            font-size: 1.5rem; /* lg */
            font-weight: 700; /* bold */
            padding: 0.75rem 1.5rem; /* p-3 px-6 */
            border-radius: 0.5rem; /* rounded-lg */
            border: 2px solid #b91c1c; /* Dark red border */
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 antialiased">

    <header class="bg-gradient-to-br from-blue-600 to-blue-800 text-white text-center py-12 md:py-16 px-4 shadow-lg">
        <h1 class="text-4xl md:text-5xl font-bold uppercase tracking-wide mb-3">POCUS Resources for Clinicians</h1>
        <p class="text-xl md:text-2xl font-light mb-4">Empowering PAs and Physicians with Point-of-Care Ultrasound knowledge.</p>
        <p class="text-lg md:text-xl font-normal text-blue-100">"Enhance diagnostic accuracy and improve patient care at the bedside."</p>
    </header>

    <div class="max-w-6xl mx-auto p-4 md:p-8 mt-[-2.5rem] mb-10 relative z-10">
        <main class="bg-white rounded-xl shadow-xl p-6 sm:p-8 md:p-10">

            <section aria-labelledby="resources-heading" class="mb-16">
                <h2 id="resources-heading" class="text-3xl md:text-4xl font-semibold text-blue-700 text-center mb-10">Core Learning Resources</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                    <div class="resource-card bg-gray-50 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow duration-300 p-6 text-center flex flex-col items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-blue-500 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                        <h3 class="text-xl font-semibold text-blue-600 mb-2">Comprehensive Guide</h3>
                        <p class="text-gray-600 mb-5 text-sm leading-relaxed flex-grow">Detailed best practices and techniques for various POCUS applications.</p>
                        <a href="https://raw.githubusercontent.com/Health-Codex/QR-Code/main/POCUS_Guide.pdf"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-base mt-auto focus-visible:outline-white">
                            Download PDF
                        </a>
                    </div>
                    <div class="resource-card bg-gray-50 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow duration-300 p-6 text-center flex flex-col items-center">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-blue-500 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m9.75 0h-3.375c-.621 0-1.125.504-1.125 1.125v6.625c0 .621.504 1.125 1.125 1.125h3.375c.621 0 1.125-.504 1.125-1.125V11.25a1.125 1.125 0 00-1.125-1.125z" /></svg>
                        <h3 class="text-xl font-semibold text-blue-600 mb-2">Quick Reference Cards</h3>
                        <p class="text-gray-600 mb-5 text-sm leading-relaxed flex-grow">Pocket-sized cards for rapid review during clinical practice.</p>
                         <a href="https://www.pocus101.com/pocket-cards/" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-base mt-auto focus-visible:outline-white">
                             View Cards
                         </a>
                    </div>
                    <div class="resource-card bg-gray-50 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow duration-300 p-6 text-center flex flex-col items-center">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-blue-500 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" /></svg>
                        <h3 class="text-xl font-semibold text-blue-600 mb-2">Image & Case Atlas</h3>
                        <p class="text-gray-600 mb-5 text-sm leading-relaxed flex-grow">Enhance diagnostic skills with a diverse collection of ultrasound images and cases.</p>
                         <a href="https://www.thepocusatlas.com/home" target="_blank" rel="noopener noreferrer" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-base mt-auto focus-visible:outline-white">
                             Explore Atlas
                         </a>
                    </div>
                </div>
            </section>

            <section class="case-studies mb-16" aria-labelledby="casestudies-heading">
                <h2 id="casestudies-heading" class="text-3xl md:text-4xl font-semibold text-blue-700 text-center mb-10">Interactive Clinical Case Studies</h2>
                <div class="space-y-8">
                    <article class="case bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                        <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Acute Shortness of Breath Post-Trauma</h3>
                        <p class="text-gray-700 mb-4">A 45-year-old male presented with acute shortness of breath after a fall from height.</p>
                        <dl class="text-sm space-y-2 mb-5">
                            <div>
                                <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                <dd class="inline text-gray-600 ml-1">Sudden onset dyspnea, sharp right-sided pleuritic chest pain, tachypnea (RR 28), hypoxia (SpO2 90% RA), decreased breath sounds on the right hemithorax.</dd>
                            </div>
                            <div>
                                <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                <dd class="inline text-gray-600 ml-1">Lung Ultrasound (evaluation for traumatic lung injury).</dd>
                            </div>
                             <div>
                                <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                <dd class="inline text-gray-600 ml-1">How can POCUS rapidly assess for life-threatening causes of acute dyspnea in this trauma patient?</dd>
                            </div>
                        </dl>
                        <button class="read-more-btn bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out focus-visible:outline-white"
                                data-title="Case Study: Acute Shortness of Breath Post-Trauma"
                                data-vignette="A 45-year-old male presents to the ED with sudden onset shortness of breath and sharp right-sided chest pain after falling approximately 10 feet off a ladder. Vitals: RR 28, HR 115, BP 130/80, SpO2 90% on room air. Exam reveals decreased breath sounds and hyperresonance to percussion on the right hemithorax."
                                data-imaging="Bedside lung POCUS is performed using a linear probe in the anterior chest zones. On the right side, pleural sliding ('ants marching') is absent. Multiple horizontal reverberation artifacts (A-lines) are seen, indicating air below the probe. M-mode interrogation across the pleural line demonstrates the 'stratosphere' or 'barcode' sign, confirming lack of lung sliding. The 'lung point' sign (junction between sliding and non-sliding lung) is identified laterally. The left lung shows normal lung sliding ('seashore' sign on M-mode)."
                                data-image-placeholder-1="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9a/Ultrasound_lung_absence_of_lung_sliding.gif/320px-Ultrasound_lung_absence_of_lung_sliding.gif"
                                data-image-alt-1="POCUS B-mode (GIF) showing absent lung sliding in pneumothorax (Source: Wikimedia Commons, CC BY-SA)"
                                data-image-placeholder-2="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f3/Stratosphere_sign_ultrasound_pneumothorax_M-mode.jpg/512px-Stratosphere_sign_ultrasound_pneumothorax_M-mode.jpg"
                                data-image-alt-2="POCUS M-mode showing the 'barcode' or 'stratosphere' sign in pneumothorax (Source: Wikimedia Commons, CC BY-SA)"
                                data-diagnosis-title="Diagnosis: Pneumothorax"
                                data-diagnosis-explanation="Interpretation & Outcome: The POCUS findings (absent lung sliding, A-lines, barcode sign, lung point) are highly specific for pneumothorax. This allows for rapid bedside diagnosis, bypassing the need for potentially delaying chest X-ray in an unstable patient. Urgent needle decompression followed by chest tube placement was performed, leading to improvement in oxygenation and respiratory status.">
                            See Details & Findings
                        </button>
                    </article>

                     <div class="under-construction-container">
                        <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Hypotension & Distended Neck Veins</h3>
                            <p class="text-gray-700 mb-4">A 60-year-old female with a history of malignancy presented with progressive weakness and shock.</p>
                            <dl class="text-sm space-y-2 mb-5">
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Hypotension (BP 85/50), tachycardia (HR 120), marked jugular venous distension (JVD), muffled heart sounds, pulsus paradoxus noted.</dd>
                                </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">Focused Cardiac Ultrasound (ECHO) and IVC assessment.</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">What are the key POCUS findings to differentiate causes of obstructive shock in this patient?</dd>
                                </div>
                            </dl>
                            <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                    <div class="under-construction-container">
                        <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Blunt Abdominal Trauma & Instability</h3>
                             <p class="text-gray-700 mb-4">A 35-year-old unrestrained driver involved in a high-speed MVC presented with hypotension.</p>
                             <dl class="text-sm space-y-2 mb-5">
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Hypotension (BP 90/60), tachycardia (HR 130), abdominal tenderness (especially LUQ), mechanism concerning for intra-abdominal injury.</dd>
                                 </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">FAST Exam (Focused Assessment with Sonography for Trauma).</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">In this hemodynamically unstable trauma patient, what is the primary goal of the FAST exam?</dd>
                                </div>
                            </dl>
                             <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                 See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                    <div class="under-construction-container">
                        <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Progressive Dyspnea in Cancer Patient</h3>
                            <p class="text-gray-700 mb-4">A 55-year-old patient with known metastatic lung cancer presented with worsening shortness of breath over several days.</p>
                            <dl class="text-sm space-y-2 mb-5">
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Progressive dyspnea, orthopnea, non-productive cough. Exam shows dullness to percussion and decreased breath sounds over the left lower lung field.</dd>
                                </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">Lung and Pleural Ultrasound.</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">How can POCUS characterize the cause of decreased breath sounds and guide potential intervention?</dd>
                                </div>
                            </dl>
                             <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                 See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                    <div class="under-construction-container">
                         <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Unilateral Leg Swelling Post-Surgery</h3>
                             <p class="text-gray-700 mb-4">A 68-year-old male presented with acute swelling and pain in his left leg 1 week after hip replacement.</p>
                             <dl class="text-sm space-y-2 mb-5">
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Left calf swelling (3cm > right), erythema, tenderness along the deep venous system. Recent major orthopedic surgery.</dd>
                                </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">Lower Extremity Venous Compression Ultrasound.</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">What specific POCUS maneuver is used to rule out proximal DVT at the bedside?</dd>
                                </div>
                            </dl>
                             <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                 See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                    <div class="under-construction-container">
                        <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Right Upper Quadrant Pain and Fever</h3>
                            <p class="text-gray-700 mb-4">A 42-year-old female presented with severe RUQ pain, nausea, and fever after eating a fatty meal.</p>
                            <dl class="text-sm space-y-2 mb-5">
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Severe, constant RUQ pain radiating to the right shoulder, nausea, vomiting, fever (38.5Â°C), positive Murphy's sign on exam.</dd>
                                </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">RUQ / Hepatobiliary Ultrasound.</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">What are the key sonographic signs used to diagnose acute cholecystitis with POCUS?</dd>
                                </div>
                            </dl>
                            <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                    <div class="under-construction-container">
                        <article class="case bg-white rounded-xl border border-gray-200 shadow-sm p-6 md:p-8 overflow-hidden opacity-50">
                            <h3 class="text-xl font-semibold text-blue-800 mb-4">Case Study: Elderly Male with Back Pain & Syncope</h3>
                            <p class="text-gray-700 mb-4">A 75-year-old male with known hypertension presented with sudden onset severe back pain and syncope.</p>
                            <dl class="text-sm space-y-2 mb-5">
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Clinical Presentation:</dt>
                                    <dd class="inline text-gray-600 ml-1">Sudden severe tearing back/abdominal pain, syncope, hypotension (BP 80/50), tachycardia (HR 110), pale and diaphoretic.</dd>
                                </div>
                                <div>
                                    <dt class="font-semibold text-gray-800 inline">POCUS Application:</dt>
                                    <dd class="inline text-gray-600 ml-1">Abdominal Aorta Ultrasound.</dd>
                                </div>
                                 <div>
                                    <dt class="font-semibold text-gray-800 inline">Key Question:</dt>
                                    <dd class="inline text-gray-600 ml-1">How can POCUS be used to rapidly assess for a catastrophic vascular emergency in this hypotensive patient with back pain?</dd>
                                </div>
                            </dl>
                            <button class="read-more-btn bg-gray-400 text-white font-medium py-2 px-6 rounded-full shadow cursor-not-allowed" disabled>
                                See Details & Findings
                            </button>
                        </article>
                        <div class="under-construction-overlay">
                            <span class="under-construction-text">Under Construction</span>
                        </div>
                    </div>

                </div> </section>

            <section class="anatomy text-center mb-12 relative under-construction-container" aria-labelledby="anatomy-heading">
                <div class="opacity-50"> {/* Content inside is dimmed */}
                    <h2 id="anatomy-heading" class="text-3xl md:text-4xl font-semibold text-blue-700 mb-8">Interactive POCUS Anatomy</h2>
                    <figure class="max-w-xl mx-auto relative" id="anatomy-figure">
                         <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e4/Torso_front_diagram_regions.svg/512px-Torso_front_diagram_regions.svg.png"
                             alt="Diagram of human torso showing major organs and regions relevant to POCUS: Heart (Cardiac), Lungs, Liver/Gallbladder (RUQ), Spleen/Stomach (LUQ), Pelvis, Neck, Leg (Femoral)."
                             id="anatomy-diagram-img"
                             class="w-full h-auto rounded-lg shadow-md block border border-gray-300 bg-white">

                        {/* Interactive Overlays - Still present but covered */}
                        <div id="anatomy-region-cardiac" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-lungs" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-ruq" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-luq" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-pelvis" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-vascular-neck" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>
                        <div id="anatomy-region-vascular-leg" class="anatomy-overlay" tabindex="-1" aria-hidden="true"></div>

                        <figcaption id="anatomy-info" class="mt-5 text-base text-gray-700 min-h-[4.5em] leading-relaxed bg-gray-50 p-4 rounded-md border border-gray-200 shadow-inner">
                            Explore POCUS applications: Click or focus on a highlighted region above and press Enter/Space. (Overlay positions may need adjustment).
                        </figcaption>
                    </figure>
                </div>
                {/* Overlay for the entire anatomy section */}
                <div class="under-construction-overlay">
                    <span class="under-construction-text">Under Construction</span>
                </div>
            </section>

        </main>
    </div>

    <div id="modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4 opacity-0" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description" aria-hidden="true">
        <div id="modal-content-box" class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-3xl w-full relative transform opacity-100 scale-100 overflow-y-auto max-h-[90vh]">
            <button id="modal-close-icon" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 transition-colors z-10 p-1 rounded-full focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2" aria-label="Close modal">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <h3 id="modal-title" class="text-2xl md:text-3xl font-semibold text-blue-700 mb-6 text-center pr-8"></h3>

            <div id="modal-description">
                <div class="mb-5 text-left border-b border-gray-200 pb-5">
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">Clinical Vignette:</h4>
                    <p id="modal-vignette" class="text-gray-700 leading-relaxed"></p>
                </div>

                <div class="mb-6 text-left">
                    <h4 class="text-xl font-semibold text-gray-800 mb-3">POCUS Findings:</h4>
                    <div id="modal-imaging-content" class="space-y-4">
                        <p id="modal-imaging-text" class="text-gray-700 leading-relaxed"></p>
                        <div id="modal-image-container" class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4">
                            </div>
                    </div>
                </div>
            </div> <div id="reveal-button-container" class="text-center mb-6 pt-4 border-t border-gray-200">
                 <button id="modal-reveal-button" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-8 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-lg focus-visible:outline-white">
                     Reveal Diagnosis & Interpretation
                 </button>
            </div>

            <div id="diagnosis-section" class="diagnosis-section hidden bg-blue-50 p-5 rounded-lg border border-blue-200 text-left mt-4">
                <h4 id="modal-diagnosis-title" class="text-xl font-semibold text-blue-800 mb-3"></h4>
                <p id="modal-diagnosis-explanation" class="text-blue-900 leading-relaxed"></p>
            </div>

            <div class="text-center mt-8">
                <button id="modal-close-button" class="bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out focus-visible:outline-white">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Element Selection ---
            const modal = document.getElementById('modal');
            const modalContentBox = document.getElementById('modal-content-box');
            const modalTitle = document.getElementById('modal-title');
            const modalVignette = document.getElementById('modal-vignette');
            const modalImagingText = document.getElementById('modal-imaging-text');
            const modalImageContainer = document.getElementById('modal-image-container');
            const revealButtonContainer = document.getElementById('reveal-button-container');
            const modalRevealButton = document.getElementById('modal-reveal-button');
            const diagnosisSection = document.getElementById('diagnosis-section');
            const modalDiagnosisTitle = document.getElementById('modal-diagnosis-title');
            const modalDiagnosisExplanation = document.getElementById('modal-diagnosis-explanation');
            const closeModalIcon = document.getElementById('modal-close-icon');
            const closeModalButton = document.getElementById('modal-close-button');
            const mainContent = document.querySelector('main'); // For event delegation

            const anatomyFigure = document.getElementById('anatomy-figure');
            const anatomyInfo = document.getElementById('anatomy-info');
            const anatomyOverlays = document.querySelectorAll('.anatomy-overlay');
            const defaultAnatomyText = anatomyInfo ? anatomyInfo.textContent.trim() : "Explore POCUS applications by interacting with the diagram."; // Store initial text safely

            // --- State Variables ---
            let previouslyFocusedElement = null; // To return focus on modal close
            let currentCaseData = {}; // Store data for the currently open modal

            // --- Modal Functions ---

            /**
             * Adds an image element to the modal image container. Includes error handling.
             * @param {string} src - Image source URL.
             * @param {string} alt - Image alt text.
             */
             function addImageToModal(src, alt) {
                // Add console log before setting src
                console.log(`Attempting to load image: ${src}`);
                const img = document.createElement('img');
                // Validate src before assigning
                if (typeof src !== 'string' || src.trim() === '') {
                    console.error(`Invalid image src provided: ${src}. Displaying fallback.`);
                    img.src = `https://placehold.co/400x300/fecaca/991b1b?text=Invalid+Image+Source`;
                    img.alt = 'Error: Invalid image source provided - ' + (alt || 'No description available.');
                } else {
                    img.src = src;
                    img.alt = alt || 'Image description not provided.'; // Provide default alt text
                }
                img.loading = 'lazy'; // Defer loading off-screen images
                img.className = 'w-full h-auto rounded shadow object-contain mx-auto border border-gray-200 bg-gray-50'; // Style the image

                // Error handling for broken image links or network issues
                img.onerror = () => {
                    // Add console log inside onerror
                    console.error(`ERROR loading image: ${img.src}. Displaying fallback.`);
                    // Refined fallback text in alt attribute and placeholder
                    img.src = `https://placehold.co/400x300/fecaca/991b1b?text=External+Image+Load+Failed`; // Display error placeholder
                    img.alt = 'Error: Failed to load external image - ' + (alt || 'No description available.'); // Update alt text
                };
                modalImageContainer.appendChild(img); // Add the image to the container
            }


            /**
             * Opens the modal and populates it with case study data.
             * @param {object} data - The case study data object from button attributes.
             */
            function openModal(data) {
                // Ensure essential elements exist
                if (!modal || !modalTitle || !modalVignette || !modalImagingText || !modalImageContainer || !diagnosisSection || !modalRevealButton || !revealButtonContainer || !modalContentBox) {
                    console.error("Modal elements missing from the DOM.");
                    return;
                }

                 // Validation check using direct property access (since data is now built with getAttribute)
                 if (!data.title || !data.vignette || !data.imaging || !data.diagnosisTitle || !data.diagnosisExplanation || !data.imagePlaceholder1 || !data.imageAlt1) {
                     console.error("Incomplete case data passed to openModal:", data);
                     return;
                 }


                // Store data and reference to the button that opened the modal
                currentCaseData = data;
                previouslyFocusedElement = document.activeElement;

                // Populate Modal Content
                modalTitle.textContent = data.title;
                modalVignette.textContent = data.vignette;
                modalImagingText.textContent = data.imaging;

                // Clear previous images and add new ones using direct data properties
                modalImageContainer.innerHTML = '';
                addImageToModal(data.imagePlaceholder1, data.imageAlt1);
                if (data.imagePlaceholder2 && data.imageAlt2) {
                    addImageToModal(data.imagePlaceholder2, data.imageAlt2);
                }

                 // Adjust grid layout based on number of images successfully added
                 const imageCount = modalImageContainer.children.length;
                 modalImageContainer.className = `grid gap-4 mt-4 ${imageCount > 1 ? 'grid-cols-1 sm:grid-cols-2' : 'grid-cols-1'}`;


                // Reset state: Hide diagnosis, show reveal button
                diagnosisSection.classList.add('hidden');
                modalDiagnosisTitle.textContent = ''; // Clear previous diagnosis text
                modalDiagnosisExplanation.textContent = '';
                revealButtonContainer.classList.remove('hidden');

                // Show Modal with transitions
                modal.setAttribute('aria-hidden', 'false');
                modal.classList.remove('opacity-0');
                // Ensure content box is visible before scrolling
                requestAnimationFrame(() => {
                    modalContentBox.scrollTop = 0; // Scroll to top
                    modalContentBox.classList.remove('opacity-0', 'scale-95'); // Ensure visible if previously hidden
                });


                // Set focus to the close icon button after a short delay to allow rendering
                 setTimeout(() => closeModalIcon.focus(), 50);


                // Add event listeners for modal interaction
                addModalEventListeners();
            }


            /**
             * Reveals the diagnosis section in the modal.
             */
            function revealDiagnosis() {
                 // Ensure elements and data exist
                if (!diagnosisSection || !modalDiagnosisTitle || !modalDiagnosisExplanation || !revealButtonContainer || !currentCaseData.diagnosisTitle) {
                    console.error("Cannot reveal diagnosis - missing elements or data.");
                    return;
                }

                // Populate and show diagnosis
                modalDiagnosisTitle.textContent = currentCaseData.diagnosisTitle;
                modalDiagnosisExplanation.textContent = currentCaseData.diagnosisExplanation;
                diagnosisSection.classList.remove('hidden');

                // Hide the reveal button
                revealButtonContainer.classList.add('hidden');

                // Smoothly scroll the diagnosis into view if needed
                diagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            /**
             * Closes the modal and cleans up listeners and state.
             */
            function closeModal() {
                if (!modal) return;

                // Hide modal with transition
                modal.classList.add('opacity-0');
                modal.setAttribute('aria-hidden', 'true');
                 // Reset transform/opacity on content box for next open
                 modalContentBox.classList.add('opacity-0', 'scale-95');


                // Clean up state
                currentCaseData = {};

                // Remove event listeners to prevent memory leaks
                removeModalEventListeners();

                // Return focus to the element that opened the modal
                if (previouslyFocusedElement) {
                    // Check if the element still exists and is focusable
                    if (document.body.contains(previouslyFocusedElement) && typeof previouslyFocusedElement.focus === 'function') {
                         previouslyFocusedElement.focus();
                    }
                    previouslyFocusedElement = null; // Clear reference
                }
            }

            /**
             * Adds necessary event listeners for modal interactions.
             */
            function addModalEventListeners() {
                modal.addEventListener('keydown', handleModalKeydown);
                modal.addEventListener('click', handleModalBackgroundClick);
                closeModalIcon.addEventListener('click', closeModal);
                closeModalButton.addEventListener('click', closeModal);
                modalRevealButton.addEventListener('click', revealDiagnosis);
            }

             /**
             * Removes event listeners added for the modal.
             */
            function removeModalEventListeners() {
                modal.removeEventListener('keydown', handleModalKeydown);
                modal.removeEventListener('click', handleModalBackgroundClick);
                closeModalIcon.removeEventListener('click', closeModal);
                closeModalButton.removeEventListener('click', closeModal);
                modalRevealButton.removeEventListener('click', revealDiagnosis);
            }

            /**
             * Handles keydown events within the modal (Escape, Tab).
             * @param {KeyboardEvent} event
             */
            function handleModalKeydown(event) {
                if (event.key === 'Escape') {
                    closeModal();
                } else if (event.key === 'Tab') {
                    trapFocus(modalContentBox, event); // Pass the modal content box
                }
            }

            /**
             * Closes the modal if the user clicks on the semi-transparent background.
             * @param {MouseEvent} event
             */
            function handleModalBackgroundClick(event) {
                // Check if the click target is the modal background itself
                if (event.target === modal) {
                    closeModal();
                }
            }

            /**
             * Traps focus within a given container element.
             * @param {HTMLElement} containerElement - The element containing focusable items.
             * @param {KeyboardEvent} event - The Tab keydown event.
             */
            function trapFocus(containerElement, event) {
                const focusableElements = Array.from(
                    containerElement.querySelectorAll(
                        'button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'
                    )
                ).filter(el => !el.closest('.hidden') && el.offsetParent !== null && getComputedStyle(el).visibility !== 'hidden' && !el.disabled);

                if (focusableElements.length === 0) {
                    event.preventDefault(); // Prevent tabbing out if nothing is focusable
                    return;
                }

                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                const currentActive = document.activeElement;

                if (event.shiftKey) { // Tab + Shift
                    if (currentActive === firstElement || !containerElement.contains(currentActive)) {
                        lastElement.focus();
                        event.preventDefault();
                    }
                } else { // Tab
                    if (currentActive === lastElement || !containerElement.contains(currentActive)) {
                        firstElement.focus();
                        event.preventDefault();
                    }
                }
            }


            // --- Event Delegation for Case Study Buttons ---
            if (mainContent) {
                mainContent.addEventListener('click', (event) => {
                    const button = event.target.closest('.read-more-btn');
                    if (button && !button.disabled) { // Check if a button was clicked AND it's not disabled
                         // Use getAttribute to read data attributes directly
                         const caseData = {
                            title: button.getAttribute('data-title'),
                            vignette: button.getAttribute('data-vignette'),
                            imaging: button.getAttribute('data-imaging'),
                            diagnosisTitle: button.getAttribute('data-diagnosis-title'),
                            diagnosisExplanation: button.getAttribute('data-diagnosis-explanation'),
                            imagePlaceholder1: button.getAttribute('data-image-placeholder-1'), // Use getAttribute
                            imageAlt1: button.getAttribute('data-image-alt-1'),             // Use getAttribute
                            imagePlaceholder2: button.getAttribute('data-image-placeholder-2'), // Use getAttribute
                            imageAlt2: button.getAttribute('data-image-alt-2')              // Use getAttribute
                         };

                         // Update validation check to use the retrieved attributes
                         if (caseData.title && caseData.vignette && caseData.imaging && caseData.diagnosisTitle && caseData.diagnosisExplanation && caseData.imagePlaceholder1 && caseData.imageAlt1) {
                            openModal(caseData);
                         } else {
                             // Log the button itself and the collected data for debugging
                             console.error("Button clicked, but missing essential data attributes. Button:", button, "Collected Data:", caseData);
                         }
                    }
                });
            } else {
                console.error("Main content area not found for event delegation.");
            }


            // --- Interactive Anatomy Diagram Logic ---

            /**
             * Updates the anatomy information caption text.
             * @param {string} infoText - The text to display. If empty, shows default text.
             */
            function showAnatomyInfo(infoText) {
                if (anatomyInfo) {
                    anatomyInfo.textContent = infoText || defaultAnatomyText;
                }
            }

            // Setup listeners for anatomy overlays if they exist AND the section is not under construction
            const anatomySection = document.querySelector('.anatomy');
            const isAnatomyUnderConstruction = anatomySection && anatomySection.classList.contains('under-construction-container');

            if (anatomyFigure && anatomyOverlays.length > 0 && anatomyInfo && !isAnatomyUnderConstruction) {
                anatomyOverlays.forEach(overlay => {
                    overlay.addEventListener('click', () => {
                        const info = overlay.dataset.info; // dataset is fine here as 'data-info' has no hyphen
                        showAnatomyInfo(info);
                    });
                    overlay.addEventListener('keydown', (event) => {
                        if (event.key === 'Enter' || event.key === ' ') {
                            event.preventDefault();
                            const info = overlay.dataset.info;
                            showAnatomyInfo(info);
                        }
                    });
                    overlay.addEventListener('blur', () => {
                        setTimeout(() => {
                             const activeElementIsOverlay = document.activeElement && document.activeElement.classList.contains('anatomy-overlay');
                             if (!anatomyFigure.contains(document.activeElement) || !activeElementIsOverlay) {
                                 showAnatomyInfo(defaultAnatomyText);
                             }
                        }, 0);
                    });
                });
                 anatomyFigure.addEventListener('click', (event) => {
                    if (!event.target.classList.contains('anatomy-overlay')) {
                        showAnatomyInfo(defaultAnatomyText);
                    }
                 });
            } else if (anatomyInfo && !isAnatomyUnderConstruction) {
                // Fallback if overlays aren't set up correctly but section is supposed to be active
                anatomyInfo.textContent = "Interactive anatomy diagram component not fully loaded.";
                console.warn("Anatomy overlays or figure container not found.");
            } else if (anatomyInfo && isAnatomyUnderConstruction) {
                // If under construction, ensure default text reflects that
                 anatomyInfo.textContent = "This section is currently under construction.";
            }

        }); // End DOMContentLoaded
    </script>

</body>
</html>
