<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POCUS Resources and Case Studies</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Apply Inter font globally */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style for visually hidden elements (Accessibility) */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            margin: -1px;
            padding: 0;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        /* Custom focus ring style */
        *:focus-visible {
            outline: 3px solid #60a5fa; /* Tailwind blue-400 */
            outline-offset: 2px;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3); /* Subtle glow */
        }
        /* Modal transition */
        #modal {
            transition: opacity 0.3s ease-in-out;
        }
        #modal-content-box {
             transition: transform 0.3s ease-in-out;
        }
        #modal.opacity-0 {
            pointer-events: none;
        }
         #modal.opacity-0 #modal-content-box {
            transform: scale(0.95);
        }
        /* Style for hidden diagnosis */
        .diagnosis-section.hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-100 to-gray-200 text-gray-800 antialiased">

    <header class="bg-gradient-to-br from-blue-500 to-blue-700 text-white text-center py-16 px-4 shadow-md">
        <h1 class="text-4xl md:text-5xl font-bold uppercase tracking-wider mb-3">POCUS Resources</h1>
        <p class="text-xl md:text-2xl font-light mb-3">Empowering you with Point-of-Care Ultrasound knowledge and tools.</p>
        <small class="text-lg md:text-xl font-normal text-blue-100 block">"Enhance diagnostic accuracy and improve patient care with POCUS."</small>
    </header>

    <main class="max-w-4xl mx-auto p-6 md:p-10">

        <section aria-labelledby="resources-heading" class="mb-12">
            <h2 id="resources-heading" class="visually-hidden">POCUS Learning Resources</h2>
            <div class="space-y-6">
                <div class="resource-card bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3">POCUS Guide PDF</h3>
                    <p class="text-gray-600 mb-5 leading-relaxed">Access the comprehensive guide to POCUS techniques. This guide provides detailed information on best practices and techniques for Point-of-Care Ultrasound.</p>
                    <a href="https://placehold.co/pdf" target="_blank" rel="noopener noreferrer" class="inline-block bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-semibold py-3 px-8 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-lg">
                        Download PDF
                    </a>
                </div>
                <div class="resource-card bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3">POCUS Pocket Cards</h3>
                    <p class="text-gray-600 mb-5 leading-relaxed">Explore pocket-sized cards for quick reference during clinical practice. These cards are perfect for on-the-go learning and immediate recall.</p>
                     <a href="https://placehold.co/cards" target="_blank" rel="noopener noreferrer" class="inline-block bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-semibold py-3 px-8 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-lg">
                        View Pocket Cards
                    </a>
                </div>
                <div class="resource-card bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                    <h3 class="text-2xl font-semibold text-blue-600 mb-3">POCUS Atlas</h3>
                    <p class="text-gray-600 mb-5 leading-relaxed">Discover a collection of ultrasound images and cases. Enhance your diagnostic skills by reviewing diverse examples in clinical imaging.</p>
                     <a href="https://placehold.co/atlas" target="_blank" rel="noopener noreferrer" class="inline-block bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-semibold py-3 px-8 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out text-lg">
                        Explore Atlas
                    </a>
                </div>
            </div>
        </section>

        <section class="case-studies mb-12" aria-labelledby="casestudies-heading">
            <h2 id="casestudies-heading" class="text-3xl md:text-4xl font-semibold text-blue-600 text-center mb-8">Educational Case Studies</h2>
            <div class="space-y-6">
                <article class="case bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                    <h3 class="text-xl font-semibold text-blue-700 mb-3">Case Study: Acute Shortness of Breath</h3>
                    <p class="text-gray-700 mb-3">A 45-year-old male presented with acute shortness of breath and a history of recent trauma.</p>
                    <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4 pl-2">
                        <li><strong>Clinical Presentation:</strong> Sudden onset of dyspnea, decreased breath sounds on one side.</li>
                        <li><strong>POCUS Findings:</strong> [See Details]</li>
                        <li><strong>Outcome:</strong> Timely chest tube insertion resolved symptoms and prevented further complications.</li>
                    </ul>
                    <button class="read-more-btn bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out"
                            data-title="Case Study: Acute Shortness of Breath"
                            data-vignette="A 45-year-old male presents to the emergency department with sudden onset shortness of breath and pleuritic chest pain after falling off a ladder earlier today. On examination, he is tachypneic (RR 28), tachycardic (HR 115), with oxygen saturation of 90% on room air. Decreased breath sounds are noted on the right side."
                            data-imaging="Bedside lung ultrasound is performed. On the right side, there is a distinct lack of pleural sliding ('lung sliding') compared to the left. When M-mode is applied across the pleural line, a pattern resembling horizontal lines ('barcode sign' or 'stratosphere sign') is observed, instead of the expected 'seashore sign'."
                            data-diagnosis-title="Diagnosis: Pneumothorax"
                            data-diagnosis-explanation="The absence of lung sliding indicates that the visceral pleura is not moving against the parietal pleura, strongly suggesting air in the pleural space (pneumothorax). The 'barcode sign' on M-mode confirms the lack of lung movement at the pleural line. These findings allowed for rapid diagnosis and intervention (chest tube) without waiting for a chest X-ray.">
                        See Details
                    </button>
                </article>

                <article class="case bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                     <h3 class="text-xl font-semibold text-blue-700 mb-3">Case Study: Hypotension and Distended Neck Veins</h3>
                    <p class="text-gray-700 mb-3">A 60-year-old female with a history of malignancy presented with hypotension and jugular venous distension.</p>
                     <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4 pl-2">
                        <li><strong>Clinical Presentation:</strong> Beck's triad - hypotension, muffled heart sounds, and distended neck veins.</li>
                        <li><strong>POCUS Findings:</strong> [See Details]</li>
                        <li><strong>Outcome:</strong> Emergency pericardiocentesis was performed under POCUS guidance, stabilizing the patient.</li>
                    </ul>
                    <button class="read-more-btn bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out"
                            data-title="Case Study: Hypotension and Distended Neck Veins"
                            data-vignette="A 60-year-old female with a known history of metastatic breast cancer presents with progressive weakness, dizziness, and shortness of breath over 24 hours. Vital signs show BP 85/50 mmHg, HR 120 bpm, RR 22. Physical exam reveals markedly distended jugular veins, distant heart sounds, and cool extremities."
                            data-imaging="Emergency bedside cardiac POCUS is performed using subxiphoid and apical views. A large, circumferential anechoic (black) space is seen surrounding the heart, consistent with a significant pericardial effusion. Importantly, during diastole, the free wall of the right ventricle is seen collapsing inward. The inferior vena cava (IVC) is plethoric (dilated) with minimal respiratory variation."
                            data-diagnosis-title="Diagnosis: Cardiac Tamponade"
                            data-diagnosis-explanation="The large pericardial effusion combined with the diastolic collapse of the right ventricle (a sign of impaired filling due to increased pericardial pressure) and a plethoric IVC are classic POCUS findings for cardiac tamponade. This is a clinical diagnosis supported by ultrasound, prompting immediate life-saving pericardiocentesis.">
                        See Details
                    </button>
                </article>

                <article class="case bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                     <h3 class="text-xl font-semibold text-blue-700 mb-3">Case Study: Trauma and Hemodynamic Instability</h3>
                    <p class="text-gray-700 mb-3">A 35-year-old male involved in a motor vehicle accident presented with flank pain and hypotension.</p>
                     <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4 pl-2">
                        <li><strong>Clinical Presentation:</strong> Hemodynamic instability and abdominal tenderness following trauma.</li>
                        <li><strong>POCUS Findings:</strong> [See Details]</li>
                        <li><strong>Outcome:</strong> Positive FAST exam prompted immediate surgical consultation and laparotomy, revealing a splenic rupture.</li>
                    </ul>
                    <button class="read-more-btn bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out"
                            data-title="Case Study: Trauma and Hemodynamic Instability"
                            data-vignette="A 35-year-old male driver is brought in by EMS after a high-speed motor vehicle collision. He is complaining of left upper quadrant abdominal pain. Initial vitals are BP 90/60 mmHg, HR 130 bpm. He received 1L of crystalloid en route with minimal improvement in blood pressure. His abdomen is tender, particularly in the left upper quadrant."
                            data-imaging="A FAST (Focused Assessment with Sonography for Trauma) exam is performed. The right upper quadrant view (Morison's pouch) shows a small sliver of anechoic fluid. The left upper quadrant view (splenorenal recess) reveals a significant collection of anechoic (black) fluid tracking around the spleen and between the spleen and the left kidney. The pelvic view also shows free fluid."
                            data-diagnosis-title="Diagnosis: Hemoperitoneum (Positive FAST)"
                            data-diagnosis-explanation="The presence of anechoic (black) free fluid in the peritoneal cavity, particularly in the splenorenal recess in the context of trauma and hemodynamic instability, constitutes a positive FAST exam. This strongly suggests intra-abdominal hemorrhage (hemoperitoneum), likely from a solid organ injury (in this case, the spleen). This finding mandates urgent surgical consultation.">
                        See Details
                    </button>
                </article>

                 <article class="case bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 p-6 md:p-8 overflow-hidden">
                     <h3 class="text-xl font-semibold text-blue-700 mb-3">Case Study: Progressive Dyspnea</h3>
                    <p class="text-gray-700 mb-3">A 55-year-old patient with a history of lung cancer presented with progressive dyspnea.</p>
                     <ul class="list-disc list-inside text-gray-600 space-y-1 mb-4 pl-2">
                        <li><strong>Clinical Presentation:</strong> Dullness to percussion and decreased breath sounds over the lower lung zones.</li>
                        <li><strong>POCUS Findings:</strong> [See Details]</li>
                        <li><strong>Outcome:</strong> POCUS-guided thoracentesis was safely performed, draining the fluid and significantly improving respiratory function.</li>
                    </ul>
                    <button class="read-more-btn bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out"
                            data-title="Case Study: Progressive Dyspnea"
                            data-vignette="A 55-year-old patient with a known history of non-small cell lung cancer presents with several days of worsening shortness of breath, particularly when lying flat, and a non-productive cough. Physical exam reveals dullness to percussion and diminished breath sounds over the lower half of the left posterior chest."
                            data-imaging="Bedside lung POCUS is performed. Placing the probe over the area of dullness reveals a large, anechoic (black) space superior to the diaphragm, separating the visceral and parietal pleura. Within this space, the compressed, atelectatic lower lobe of the lung is seen gently moving with respiration (the 'flapping lung' or 'jellyfish' sign)."
                            data-diagnosis-title="Diagnosis: Large Pleural Effusion"
                            data-diagnosis-explanation="The large anechoic space above the diaphragm confirms the presence of a significant pleural effusion. POCUS allows for estimation of the size, characterization of the fluid (simple anechoic vs. complex/septated), and identification of the optimal, safe site for thoracentesis, avoiding the diaphragm and consolidated lung tissue.">
                        See Details
                    </button>
                </article>
            </div>
        </section>

        <section class="anatomy text-center mb-12" aria-labelledby="anatomy-heading">
            <h2 id="anatomy-heading" class="text-3xl md:text-4xl font-semibold text-blue-600 mb-6">Interactive Anatomy Diagram</h2>
            <figure class="max-w-xl mx-auto">
                 <img src="https://placehold.co/600x400/e2e8f0/64748b?text=Interactive+Anatomy+Diagram"
                     alt="Diagram of human torso showing key areas for POCUS examination. Click or focus and press Enter/Space to learn more."
                     tabindex="0"
                     id="anatomy-diagram-img"
                     class="w-full h-auto rounded-lg shadow-md cursor-pointer transition-transform duration-300 hover:scale-105 block">
                 <figcaption id="anatomy-info" class="mt-4 text-lg text-gray-600 min-h-[2.5em] leading-relaxed">
                    Click or focus on the diagram above and press Enter/Space to see general POCUS applications.
                 </figcaption>
            </figure>
        </section>
    </main>

    <div id="modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 p-4 opacity-0" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-vignette modal-imaging modal-diagnosis-content" aria-hidden="true">
        <div id="modal-content-box" class="bg-white rounded-lg shadow-xl p-6 md:p-8 max-w-2xl w-full relative transform scale-95 overflow-y-auto max-h-[90vh]">
            <button id="modal-close-icon" class="absolute top-3 right-3 text-gray-500 hover:text-gray-800 transition-colors z-10" aria-label="Close modal">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>

            <h3 id="modal-title" class="text-2xl font-semibold text-blue-600 mb-4 text-center"></h3>

            <div class="mb-4 text-left">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">Clinical Vignette:</h4>
                <p id="modal-vignette" class="text-gray-700 leading-relaxed"></p>
            </div>

            <div class="mb-6 text-left">
                <h4 class="text-lg font-semibold text-gray-800 mb-2">POCUS Findings:</h4>
                <p id="modal-imaging" class="text-gray-700 leading-relaxed"></p>
                 </div>

            <div id="reveal-button-container" class="text-center mb-6">
                <button id="modal-reveal-button" class="bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out">
                    Reveal Diagnosis
                </button>
            </div>

            <div id="diagnosis-section" class="diagnosis-section hidden bg-blue-50 p-4 rounded-lg border border-blue-200 text-left">
                 <h4 id="modal-diagnosis-title" class="text-lg font-semibold text-blue-800 mb-2"></h4>
                 <p id="modal-diagnosis-explanation" class="text-blue-900 leading-relaxed"></p>
            </div>

            <div class="text-center mt-6">
                <button id="modal-close-button" class="bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white font-medium py-2 px-6 rounded-full shadow hover:shadow-md transition duration-300 ease-in-out">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DOM Elements ---
            const modal = document.getElementById('modal');
            const modalContentBox = document.getElementById('modal-content-box');
            const modalTitle = document.getElementById('modal-title');
            // New modal content elements
            const modalVignette = document.getElementById('modal-vignette');
            const modalImaging = document.getElementById('modal-imaging');
            const revealButtonContainer = document.getElementById('reveal-button-container');
            const modalRevealButton = document.getElementById('modal-reveal-button');
            const diagnosisSection = document.getElementById('diagnosis-section');
            const modalDiagnosisTitle = document.getElementById('modal-diagnosis-title');
            const modalDiagnosisExplanation = document.getElementById('modal-diagnosis-explanation');
            // ---
            const closeModalIcon = document.getElementById('modal-close-icon');
            const closeModalButton = document.getElementById('modal-close-button');
            const anatomyImg = document.getElementById('anatomy-diagram-img');
            const anatomyInfo = document.getElementById('anatomy-info');
            const mainContent = document.querySelector('main');

            let previouslyFocusedElement = null;
            let currentDiagnosisTitle = ''; // Store diagnosis data for the currently open modal
            let currentDiagnosisExplanation = '';

            // --- Modal Functionality ---
            function openModal(title, vignette, imaging, diagTitle, diagExplanation) {
                if (!modal || !modalTitle || !modalVignette || !modalImaging || !diagnosisSection || !modalRevealButton) return;

                previouslyFocusedElement = document.activeElement;

                // Populate initial content
                modalTitle.textContent = title;
                modalVignette.textContent = vignette;
                modalImaging.textContent = imaging;

                // Store diagnosis data
                currentDiagnosisTitle = diagTitle;
                currentDiagnosisExplanation = diagExplanation;

                // Reset modal state
                diagnosisSection.classList.add('hidden'); // Hide diagnosis
                modalRevealButton.disabled = false; // Ensure button is enabled
                modalRevealButton.textContent = 'Reveal Diagnosis'; // Reset button text
                revealButtonContainer.classList.remove('hidden'); // Ensure button container is visible

                modal.classList.remove('opacity-0');
                modal.setAttribute('aria-hidden', 'false');
                modalContentBox.scrollTop = 0; // Scroll to top

                // Focus the first focusable element (close icon)
                closeModalIcon.focus();

                // Add event listeners
                modal.addEventListener('keydown', handleModalKeydown);
                modal.addEventListener('click', handleModalBackgroundClick);
                closeModalIcon.addEventListener('click', closeModal);
                closeModalButton.addEventListener('click', closeModal);
                modalRevealButton.addEventListener('click', revealDiagnosis); // Listener for reveal button
            }

            function revealDiagnosis() {
                 if (!diagnosisSection || !modalDiagnosisTitle || !modalDiagnosisExplanation || !modalRevealButton) return;

                 // Populate and show diagnosis
                 modalDiagnosisTitle.textContent = currentDiagnosisTitle;
                 modalDiagnosisExplanation.textContent = currentDiagnosisExplanation;
                 diagnosisSection.classList.remove('hidden');

                 // Update button state
                 // modalRevealButton.disabled = true;
                 // modalRevealButton.textContent = 'Diagnosis Revealed';
                 revealButtonContainer.classList.add('hidden'); // Hide the button after revealing

                 // Optional: Scroll to the diagnosis section if modal is long
                 diagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            function closeModal() {
                if (!modal) return;

                modal.classList.add('opacity-0');
                modal.setAttribute('aria-hidden', 'true');

                // Clean up listeners specific to modal instance
                modal.removeEventListener('keydown', handleModalKeydown);
                modal.removeEventListener('click', handleModalBackgroundClick);
                closeModalIcon.removeEventListener('click', closeModal);
                closeModalButton.removeEventListener('click', closeModal);
                modalRevealButton.removeEventListener('click', revealDiagnosis); // Remove reveal listener

                 // Clear stored diagnosis data
                 currentDiagnosisTitle = '';
                 currentDiagnosisExplanation = '';

                if (previouslyFocusedElement) {
                    previouslyFocusedElement.focus();
                }
            }

            function handleModalKeydown(event) {
                if (event.key === 'Escape') {
                    closeModal();
                } else if (event.key === 'Tab') {
                    trapFocus(event);
                }
            }

            function handleModalBackgroundClick(event) {
                if (event.target === modal) {
                    closeModal();
                }
            }

            function trapFocus(event) {
                // Include the reveal button if it's visible
                const focusableElements = Array.from(modal.querySelectorAll(
                    'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
                )).filter(el => !el.closest('.hidden')); // Filter out elements in hidden containers

                if (focusableElements.length === 0) return;

                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];
                const currentActive = document.activeElement;

                if (event.shiftKey) { // Shift + Tab
                    if (currentActive === firstElement) {
                        lastElement.focus();
                        event.preventDefault();
                    }
                } else { // Tab
                    if (currentActive === lastElement) {
                        firstElement.focus();
                        event.preventDefault();
                    }
                }
            }

            // --- Event Delegation for "Read More" / "See Details" buttons ---
            if (mainContent) {
                mainContent.addEventListener('click', (event) => {
                    const button = event.target.closest('.read-more-btn');
                    if (button) {
                        // Get all data attributes
                        const title = button.dataset.title;
                        const vignette = button.dataset.vignette;
                        const imaging = button.dataset.imaging;
                        const diagTitle = button.dataset.diagnosisTitle;
                        const diagExplanation = button.dataset.diagnosisExplanation;

                        if (title && vignette && imaging && diagTitle && diagExplanation) {
                            openModal(title, vignette, imaging, diagTitle, diagExplanation);
                        } else {
                            console.error("Missing data attributes on button:", button);
                        }
                    }
                });
            }

            // --- Anatomy Diagram Interaction (Unchanged) ---
            function showAnatomyInfo(info) {
                 if (anatomyInfo) {
                    anatomyInfo.textContent = info;
                 }
            }
            const defaultAnatomyText = "Click or focus on the diagram above and press Enter/Space to see general POCUS applications.";
            const anatomyDetailText = 'POCUS is versatile! Key areas include: Cardiac (heart function, effusions), Lungs (pneumothorax, effusions, consolidation), Abdomen (FAST for trauma, gallbladder, kidneys, aorta), Pelvis (free fluid), and Vascular (DVT assessment).';
            if (anatomyImg) {
                anatomyImg.addEventListener('click', () => showAnatomyInfo(anatomyDetailText));
                anatomyImg.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        showAnatomyInfo(anatomyDetailText);
                    }
                });
            }
        });
    </script>

</body>
</html>
